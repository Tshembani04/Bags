{"ast":null,"code":"const storeCartItems = cartItems => {\n  const cart = cartItems.length > 0 ? cartItems : [];\n  localStorage.setItem('cart', JSON.stringify(cart));\n};\nexport const sumItems = cartItems => {\n  storeCartItems(cartItems);\n  return {\n    itemCount: cartItems.reduce((total, prod) => total + prod.quantity, 0),\n    total: cartItems.reduce((total, prod) => total + prod.price * prod.quantity, 0)\n  };\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      // check if item is in cart\n      if (!state.cartItems.find(item => item.id === action.payload.id)) {\n        state.cartItems.push({\n          ...action.payload,\n          quantity: 1\n        });\n      }\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'INCREASE':\n      const increaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      state.cartItems[increaseIndex].quantity++;\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'DECREASE':\n      const decreaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      const product = state.cartItems[decreaseIndex];\n      if (product.quantity > 1) {\n        product.quantity--;\n      }\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'REMOVE_ITEM':\n      const newCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\n      return {\n        ...state,\n        cartItems: [...newCartItems],\n        ...sumItems(newCartItems)\n      };\n    case 'CLEAR':\n      localStorage.removeItem('cart');\n      return {\n        cartItems: [],\n        itemCount: 0,\n        total: 0\n      };\n    default:\n      return state;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["storeCartItems","cartItems","cart","length","localStorage","setItem","JSON","stringify","sumItems","itemCount","reduce","total","prod","quantity","price","cartReducer","state","action","type","find","item","id","payload","push","increaseIndex","findIndex","decreaseIndex","product","newCartItems","filter","removeItem"],"sources":["C:/Users/katleho/0xRedPill/LTC/OnlineStore-master/src/components/Context/cart-reducer.js"],"sourcesContent":["const storeCartItems = (cartItems) => {\n    const cart = cartItems.length > 0 ? cartItems: [];\n    localStorage.setItem('cart', JSON.stringify(cart));\n}\n\nexport const sumItems = cartItems => {\n    storeCartItems(cartItems);\n    return {\n        itemCount: cartItems.reduce((total, prod) => total + prod.quantity , 0),\n        total: cartItems.reduce((total, prod) => total + (prod.price * prod.quantity) , 0)\n    }\n}\n\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n      case 'ADD_ITEM':\n           // check if item is in cart\n           if (!state.cartItems.find(item => item.id === action.payload.id)){\n               state.cartItems.push({\n                   ...action.payload,\n                   quantity: 1,\n               })\n           }\n           return {\n               ...state,\n               cartItems: [...state.cartItems],\n               ...sumItems(state.cartItems) \n           }\n           case 'INCREASE':\n               const increaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id)\n               state.cartItems[increaseIndex].quantity++;\n\n               return{\n                   ...state,\n                   cartItems: [...state.cartItems],\n                   ...sumItems(state.cartItems),\n               }\n               case 'DECREASE':\n                const decreaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n                const product = state.cartItems[decreaseIndex];\n                if (product.quantity > 1) {\n                  product.quantity--;\n                }\n                return {\n                  ...state,\n                  cartItems: [...state.cartItems],\n                  ...sumItems(state.cartItems),\n                }\n                case 'REMOVE_ITEM':\n                const newCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\n                return {\n                ...state,\n                cartItems: [...newCartItems],\n                ...sumItems(newCartItems), \n                }\n                case 'CLEAR':\n                localStorage.removeItem('cart');\n                return {\n                cartItems: [],\n                itemCount: 0,\n                total: 0,\n                }\n                default:\n                return state;\n  }\n};\nexport default cartReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}